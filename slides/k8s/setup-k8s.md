# Setting up Kubernetes

- How did we set up these Kubernetes clusters that we're using?

--

<!-- ##VERSION## -->

- We used `kubeadm` on freshly installed VM instances running Ubuntu LTS

    1. Install Docker

    2. Install Kubernetes packages

    3. Run `kubeadm init` on the first node (it deploys the control plane on that node)

    4. Set up Weave (the overlay network)
       <br/>
       (that step is just one `kubectl apply` command; discussed later)

    5. Run `kubeadm join` on the other nodes (with the token produced by `kubeadm init`)

    6. Copy the configuration file generated by `kubeadm init`

- Check the [prepare VMs README](https://@@GITREPO@@/blob/master/prepare-vms/README.md) for more details

---

## `kubeadm` drawbacks

- Doesn't set up Docker or any other container engine (required)

- Doesn't set up the overlay network (required)

- Doesn't set up optional multi-master (no high availability)

--

  (At least ... not yet! Though it's [experimental in 1.12](https://kubernetes.io/docs/setup/independent/high-availability/).)

--

- "It's still twice as many steps as setting up a Swarm cluster ðŸ˜•" -- JÃ©rÃ´me

--

- "It's still 4x as many steps for setting up HA than a Swarm cluster ðŸ˜¢" -- Bret

---

## Major deployment tool types

- Your distro of choice:
[Docker Enterprise](https://www.docker.com/products/docker-enterprise),
[RedHat OpenShift](https://www.openshift.com/),
[VMware/Pivotal](https://pivotal.io/platform/pivotal-container-service),
[Rancher](https://rancher.com/products/rancher),
[61 distros and growing](https://kubernetes.io/partners/#conformance)

--

- Official cloud-provided tools: 
[Azure AKS](https://azure.microsoft.com/services/kubernetes-service/),
[Google GKE](https://cloud.google.com/kubernetes-engine/),
[AWS EKS](https://aws.amazon.com/eks/)/[eksctl](https://eksctl.io/),
[DigitalOcean DOK](https://www.digitalocean.com/products/kubernetes/)

--

- Cloud-agnostic production cluster tools:
[kubeadm](https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm/),
[kops](https://github.com/kubernetes/kops),
[kubicorn](https://github.com/kubicorn/kubicorn)

--

- Single-master Linux clusters:
[k3s](https://k3s.io),
[kubespawn](https://github.com/kinvolk/kube-spawn),
[microk8s](https://microk8s.io)

--

- Local Windows/Mac dev/test:
[Docker Desktop](https://docs.docker.com/docker-for-mac/kubernetes/),
[minikube](https://kubernetes.io/docs/setup/minikube/),
[kind](https://kind.sigs.k8s.io)

--

- Browser based learning:
[Play-With-Kubernetes](https://labs.play-with-k8s.com),
[Katacoda](https://www.katacoda.com/courses/kubernetes)

---

## Even more deployment options

- If you like Ansible:
  [kubespray](https://github.com/kubernetes-incubator/kubespray)

- If you like Terraform:
  [typhoon](https://github.com/poseidon/typhoon)

- If you like Terraform and Puppet:
  [tarmak](https://github.com/jetstack/tarmak)

- You can also learn how to install every component manually, with
  the excellent tutorial [Kubernetes The Hard Way](https://github.com/kelseyhightower/kubernetes-the-hard-way)

  *Kubernetes The Hard Way is optimized for learning, which means taking the long route to ensure you understand each task required to bootstrap a Kubernetes cluster.*

- For a longer list, check the Kubernetes documentation:
  <br/>
  it has a great guide to [pick the right solution](https://kubernetes.io/docs/setup/#production-environment) to set up Kubernetes.
